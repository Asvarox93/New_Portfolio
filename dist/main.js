"use strict";
"use strict";
"use strict";
"use strict";
"use strict";$(".contact-form").submit(function(t){$.ajax({type:"POST",url:"contact-form-sender.php",data:$(".contact-form").serialize(),success:function(t){0==t?$(".contact-form-alert").html('<div class="alert alert-danger" role="alert">Coś poszło nie tak! Proszę sprawdzić formularz.</div>'):2==t?$(".contact-form-alert").html('<div class="alert alert-danger" role="alert">Coś poszło nie tak! Proszę spróbować pożniej.</div>'):1==t&&($(".contact-form-alert").html('<div class="alert alert-success" role="alert">Wiadomość została wysłana pomyślnie!</div>'),$(".contact-form").trigger("reset"),$(".contact-form-alert").fadeOut(4e3,function(){$(".contact-form-alert").hide()}))}}),t.preventDefault()});
"use strict";
"use strict";
"use strict";
"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};$(window).on("load",function(){var e=500;$(".spinner-wrapper").fadeOut(e)}),function(){function e(){if(!C&&document.body){C=!0;var e=document.body,t=document.documentElement,o=window.innerHeight,r=e.scrollHeight;if(H=document.compatMode.indexOf("CSS")>=0?t:e,b=e,M.keyboardSupport&&f("keydown",n),top!=self)T=!0;else if(J&&r>o&&(e.offsetHeight<=o||t.offsetHeight<=o)){var a=document.createElement("div");a.style.cssText="position:absolute; z-index:-10000; top:0; left:0; right:0; height:"+H.scrollHeight+"px",document.body.appendChild(a);var i;S=function(){i||(i=setTimeout(function(){E||(a.style.height="0",a.style.height=H.scrollHeight+"px",i=null)},500))},setTimeout(S,10),f("resize",S);if((g=new q(S)).observe(e,{attributes:!0,childList:!0,characterData:!1}),H.offsetHeight<=o){var l=document.createElement("div");l.style.clear="both",e.appendChild(l)}}M.fixedBackground||E||(e.style.backgroundAttachment="scroll",t.style.backgroundAttachment="scroll")}}function t(e,t,o){if(function(e,t){e=e>0?1:-1,t=t>0?1:-1,(B.x!==e||B.y!==t)&&(B.x=e,B.y=t,Y=[],A=0)}(t,o),1!=M.accelerationMax){var n=Date.now()-A;if(n<M.accelerationDelta){var r=(1+50/n)/2;r>1&&(r=Math.min(r,M.accelerationMax),t*=r,o*=r)}A=Date.now()}if(Y.push({x:t,y:o,lastX:t<0?.99:-.99,lastY:o<0?.99:-.99,start:Date.now()}),!$){var a=_(),i=e===a||e===document.body;null==e.$scrollBehavior&&function(e){var t=N(e);if(null==j[t]){var o=getComputedStyle(e,"")["scroll-behavior"];j[t]="smooth"==o}return j[t]}(e)&&(e.$scrollBehavior=e.style.scrollBehavior,e.style.scrollBehavior="auto");R(function n(r){for(var a=Date.now(),l=0,c=0,u=0;u<Y.length;u++){var s=Y[u],d=a-s.start,f=d>=M.animationTime,m=f?1:d/M.animationTime;M.pulseAlgorithm&&(m=function(e){return e>=1?1:e<=0?0:(1==M.pulseNormalize&&(M.pulseNormalize/=y(1)),y(e))}(m));var h=s.x*m-s.lastX>>0,p=s.y*m-s.lastY>>0;l+=h,c+=p,s.lastX+=h,s.lastY+=p,f&&(Y.splice(u,1),u--)}i?window.scrollBy(l,c):(l&&(e.scrollLeft+=l),c&&(e.scrollTop+=c)),t||o||(Y=[]),Y.length?R(n,e,1e3/M.frameRate+1):($=!1,null!=e.$scrollBehavior&&(e.style.scrollBehavior=e.$scrollBehavior,e.$scrollBehavior=null))},e,0),$=!0}}function o(o){C||e();var n=o.target;if(o.defaultPrevented||o.ctrlKey)return!0;if(h(b,"embed")||h(n,"embed")&&/\.pdf/i.test(n.src)||h(b,"object")||n.shadowRoot)return!0;var r=-o.wheelDeltaX||o.deltaX||0,i=-o.wheelDeltaY||o.deltaY||0;O&&(o.wheelDeltaX&&p(o.wheelDeltaX,120)&&(r=o.wheelDeltaX/Math.abs(o.wheelDeltaX)*-120),o.wheelDeltaY&&p(o.wheelDeltaY,120)&&(i=o.wheelDeltaY/Math.abs(o.wheelDeltaY)*-120)),r||i||(i=-o.wheelDelta||0),1===o.deltaMode&&(r*=40,i*=40);var l=c(n);return l?!!function(e){if(!e)return;z.length||(z=[e,e,e]);e=Math.abs(e),z.push(e),z.shift(),clearTimeout(x),x=setTimeout(function(){try{localStorage.SS_deltaBuffer=z.join(",")}catch(e){}},1e3);var t=e>120&&w(e);return!w(120)&&!w(100)&&!t}(i)||(Math.abs(r)>1.2&&(r*=M.stepSize/120),Math.abs(i)>1.2&&(i*=M.stepSize/120),t(l,r,i),o.preventDefault(),void a()):!T||!I||(Object.defineProperty(o,"target",{value:window.frameElement}),parent.wheel(o))}function n(e){var o=e.target,n=e.ctrlKey||e.altKey||e.metaKey||e.shiftKey&&e.keyCode!==L.spacebar;document.body.contains(b)||(b=document.activeElement);var r=/^(button|submit|radio|checkbox|file|color|image)$/i;if(e.defaultPrevented||/^(textarea|select|embed|object)$/i.test(o.nodeName)||h(o,"input")&&!r.test(o.type)||h(b,"video")||function(e){var t=e.target,o=!1;if(-1!=document.URL.indexOf("www.youtube.com/watch"))do{if(o=t.classList&&t.classList.contains("html5-video-controls"))break}while(t=t.parentNode);return o}(e)||o.isContentEditable||n)return!0;if((h(o,"button")||h(o,"input")&&r.test(o.type))&&e.keyCode===L.spacebar)return!0;if(h(o,"input")&&"radio"==o.type&&X[e.keyCode])return!0;var i=0,l=0,u=c(b);if(!u)return!T||!I||parent.keydown(e);var s=u.clientHeight;switch(u==document.body&&(s=window.innerHeight),e.keyCode){case L.up:l=-M.arrowScroll;break;case L.down:l=M.arrowScroll;break;case L.spacebar:l=-(e.shiftKey?1:-1)*s*.9;break;case L.pageup:l=.9*-s;break;case L.pagedown:l=.9*s;break;case L.home:u==document.body&&document.scrollingElement&&(u=document.scrollingElement),l=-u.scrollTop;break;case L.end:var d=u.scrollHeight-u.scrollTop-s;l=d>0?d+10:0;break;case L.left:i=-M.arrowScroll;break;case L.right:i=M.arrowScroll;break;default:return!0}t(u,i,l),e.preventDefault(),a()}function r(e){b=e.target}function a(){clearTimeout(k),k=setInterval(function(){K=P=j={}},1e3)}function i(e,t,o){for(var n=o?K:P,r=e.length;r--;)n[N(e[r])]=t;return t}function l(e,t){return(t?K:P)[N(e)]}function c(e){var t=[],o=document.body,n=H.scrollHeight;do{var r=l(e,!1);if(r)return i(t,r);if(t.push(e),n===e.scrollHeight){var a=s(H)&&s(o)||d(H);if(T&&u(H)||!T&&a)return i(t,_())}else if(u(e)&&d(e))return i(t,e)}while(e=e.parentElement)}function u(e){return e.clientHeight+10<e.scrollHeight}function s(e){return"hidden"!==getComputedStyle(e,"").getPropertyValue("overflow-y")}function d(e){var t=getComputedStyle(e,"").getPropertyValue("overflow-y");return"scroll"===t||"auto"===t}function f(e,t,o){window.addEventListener(e,t,o||!1)}function m(e,t,o){window.removeEventListener(e,t,o||!1)}function h(e,t){return e&&(e.nodeName||"").toLowerCase()===t.toLowerCase()}function p(e,t){return Math.floor(e/t)==e/t}function w(e){return p(z[0],e)&&p(z[1],e)&&p(z[2],e)}function y(e){var t,o;return(e*=M.pulseScale)<1?t=e-(1-Math.exp(-e)):(e-=1,t=(o=Math.exp(-1))+(1-Math.exp(-e))*(1-o)),t*M.pulseNormalize}function v(e){for(var t in e)D.hasOwnProperty(t)&&(M[t]=e[t])}var b,g,S,x,k,D={frameRate:150,animationTime:400,stepSize:100,pulseAlgorithm:!0,pulseScale:4,pulseNormalize:1,accelerationDelta:50,accelerationMax:3,keyboardSupport:!0,arrowScroll:50,fixedBackground:!0,excluded:""},M=D,E=!1,T=!1,B={x:0,y:0},C=!1,H=document.documentElement,z=[],O=/^Mac/.test(navigator.platform),L={left:37,up:38,right:39,down:40,spacebar:32,pageup:33,pagedown:34,end:35,home:36},X={37:1,38:1,39:1,40:1},Y=[],$=!1,A=Date.now(),N=function(){var e=0;return function(t){return t.uniqueID||(t.uniqueID=e++)}}(),K={},P={},j={};if(window.localStorage&&localStorage.SS_deltaBuffer)try{z=localStorage.SS_deltaBuffer.split(",")}catch(e){}var R=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e,t,o){window.setTimeout(e,o||1e3/60)},q=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,_=function(){var e=document.scrollingElement;return function(){if(!e){var t=document.createElement("div");t.style.cssText="height:10000px;width:1px;",document.body.appendChild(t);var o=document.body.scrollTop;document.documentElement.scrollTop;window.scrollBy(0,3),e=document.body.scrollTop!=o?document.body:document.documentElement,window.scrollBy(0,-3),document.body.removeChild(t)}return e}}(),V=window.navigator.userAgent,F=/Edge/.test(V),I=/chrome/i.test(V)&&!F,W=/safari/i.test(V)&&!F,U=/mobile/i.test(V),G=/Windows NT 6.1/i.test(V)&&/rv:11/i.test(V),J=W&&(/Version\/8/i.test(V)||/Version\/9/i.test(V)),Q=(I||W||G)&&!U,Z=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){Z=!0}}))}catch(e){}var ee=!!Z&&{passive:!1},te="onwheel"in document.createElement("div")?"wheel":"mousewheel";te&&Q&&(f(te,o,ee),f("mousedown",r),f("load",e)),v.destroy=function(){g&&g.disconnect(),m(te,o),m("mousedown",r),m("keydown",n),m("resize",S),m("load",e)},window.SmoothScrollOptions&&v(window.SmoothScrollOptions),"function"==typeof define&&define.amd?define(function(){return v}):"object"==("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=v:window.SmoothScroll=v}();
"use strict";function onResize(o){var i=$(window).width(),n=$(".navigation_bar"),a=$(".navigation_menu");i<800?(a.hide(),n.show()):(a.show(),n.hide())}function onScroll(o){var i=$(document).scrollTop();$(".navigation_items a").each(function(){var o=$(this),n=$(o.attr("href"));n.position().top-70<=i&&n.position().top+n.height()>=i?($(".navigation_items ul li a").removeClass("active"),o.addClass("active")):o.removeClass("active")})}$(document).ready(function(){var o=$(".navigation_menu"),i=$(".navigation_bar");i.click(function(){$(this).toggleClass("navigation_bar--open"),o.toggle()}),onResize(),$(window).on("resize",onResize),$(document).on("scroll",onScroll),$('a[href^="#"]').on("click",function(o){o.preventDefault(),$(document).off("scroll"),onResize(),i.removeClass("navigation_bar--open"),$("a").each(function(){$(this).removeClass("active"),$(this).parent().removeClass("active")}),$(this).addClass("active"),$(this).parent().addClass("active");var n=this.hash,a=$(n).offset().top-70;$("html, body").stop().animate({scrollTop:a},500,"swing",function(){$(document).on("scroll",onScroll)})})});
"use strict";
"use strict";
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFib3V0LW1lLmpzIiwiYmlvZ3JhcGh5LmpzIiwiYmxvZy5qcyIsImNsaWVudC1yZXZpZXcuanMiLCJjb250YWN0LmpzIiwiZm9vdGVyLmpzIiwiaGVhZGVyLmpzIiwia25vd2xlZGdlLmpzIiwibWFpbi5qcyIsIm1lbnUuanMiLCJwcm9qZWN0cy5qcyIsInNraWxscy5qcyJdLCJuYW1lcyI6WyIkIiwic3VibWl0IiwiZSIsImFqYXgiLCJ1cmwiLCJ0eXBlIiwic2VyaWFsaXplIiwiZGF0YSIsInN1Y2Nlc3MiLCJodG1sIiwidHJpZ2dlciIsImZhZGVPdXQiLCJoaWRlIiwicHJldmVudERlZmF1bHQiLCJ3aW5kb3ciLCJvbiIsInByZWxvYWRlckZhZGVPdXRUaW1lIiwiaGlkZVByZWxvYWRlciIsImluaXQiLCJpbml0RG9uZSIsImRvY3VtZW50IiwiYm9keSIsImRvY3VtZW50RWxlbWVudCIsImlubmVySGVpZ2h0Iiwic2Nyb2xsSGVpZ2h0Iiwicm9vdCIsIndpbmRvd0hlaWdodCIsImFjdGl2ZUVsZW1lbnQiLCJvcHRpb25zIiwia2V5Ym9hcmRTdXBwb3J0IiwiYWRkRXZlbnQiLCJrZXlkb3duIiwidG9wIiwic2VsZiIsImluaXRUZXN0IiwiaXNPbGRTYWZhcmkiLCJvZmZzZXRIZWlnaHQiLCJmdWxsUGFnZUVsZW0iLCJwZW5kaW5nUmVmcmVzaCIsInJlZnJlc2hTaXplIiwiaXNFeGNsdWRlZCIsInN0eWxlIiwiaGVpZ2h0Iiwic2V0VGltZW91dCIsImNvbmZpZyIsIm9ic2VydmVyIiwiY2xlYXJmaXgiLCJhdHRyaWJ1dGVzIiwiY2hpbGRMaXN0IiwiY2hhcmFjdGVyRGF0YSIsImFwcGVuZENoaWxkIiwiY3JlYXRlRWxlbWVudCIsImNsZWFyIiwiZml4ZWRCYWNrZ3JvdW5kIiwiYmFja2dyb3VuZEF0dGFjaG1lbnQiLCJhY2NlbGVyYXRpb25NYXgiLCJ4IiwieSIsImRwaVNjYWxlZFdoZWVsRGVsdGEiLCJkaXJlY3Rpb24iLCJhbGxEZWx0YXNEaXZpc2FibGVCeSIsInF1ZSIsImxhc3RTY3JvbGwiLCJmbG9vciIsImRpcmVjdGlvbkNoZWNrIiwiRGF0ZSIsImFjY2VsZXJhdGlvbkRlbHRhIiwiZWxhcHNlZCIsImZhY3RvciIsIm5vdyIsIk1hdGgiLCJsZWZ0IiwibWluIiwibGFzdFgiLCJsYXN0WSIsInN0YXJ0IiwicGVuZGluZyIsInNjcm9sbFJvb3QiLCJnZXRTY3JvbGxSb290IiwiaXNXaW5kb3dTY3JvbGwiLCJlbGVtIiwiJHNjcm9sbEJlaGF2aW9yIiwiZWwiLCJzbW9vdGhCZWhhdmlvckZvckVsZW1lbnQiLCJpZCIsInNjcm9sbEJlaGF2aW9yIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImlzU2Nyb2xsQmVoYXZpb3JTbW9vdGgiLCJzdGVwIiwicmVxdWVzdEZyYW1lIiwic2Nyb2xsWSIsInRpbWUiLCJzY3JvbGxYIiwiZmluaXNoZWQiLCJhbmltYXRpb25UaW1lIiwiaXRlbSIsImkiLCJwb3NpdGlvbiIsInB1bHNlQWxnb3JpdGhtIiwiU21vb3RoU2Nyb2xsIiwiZGVzdHJveSIsIlNtb290aFNjcm9sbE9wdGlvbnMiLCJwdWxzZU5vcm1hbGl6ZSIsInB1bHNlXyIsInB1bHNlIiwic3BsaWNlIiwic2Nyb2xsVG9wIiwic2Nyb2xsTGVmdCIsImZyYW1lUmF0ZSIsIndoZWVsIiwiZXZlbnQiLCJ0YXJnZXQiLCJkZWZhdWx0UHJldmVudGVkIiwiY3RybEtleSIsImlzTm9kZU5hbWUiLCJ3aGVlbERlbHRhWCIsIndoZWVsRGVsdGFZIiwiZGVsdGFZIiwic3JjIiwic2hhZG93Um9vdCIsImRlbHRhWCIsImlzTWFjIiwiaXNEaXZpc2libGUiLCJhYnMiLCJ3aGVlbERlbHRhIiwib3ZlcmZsb3dpbmciLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImlzQ29udHJvbCIsImRlbHRhQnVmZmVyIiwibGVuZ3RoIiwicGFyZW50Tm9kZSIsInB1c2giLCJzaGlmdCIsImNsZWFyVGltZW91dCIsImRlbHRhQnVmZmVyVGltZXIiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJsb2NhbFN0b3JhZ2UiLCJTU19kZWx0YUJ1ZmZlciIsImpvaW4iLCJNdXRhdGlvbk9ic2VydmVyIiwic2NoZWR1bGVDbGVhckNhY2hlIiwic3RlcFNpemUiLCJzY3JvbGxBcnJheSIsImlzRnJhbWUiLCJpc0Nocm9tZSIsInZhbHVlIiwiZnJhbWVFbGVtZW50IiwicGFyZW50IiwibW9kaWZpZXIiLCJhbHRLZXkiLCJpbnB1dE5vZGVOYW1lcyIsImJ1dHRvblR5cGVzIiwia2V5Q29kZSIsImtleSIsInNwYWNlYmFyIiwiY29udGFpbnMiLCJ0ZXN0Iiwibm9kZU5hbWUiLCJVUkwiLCJpbmRleE9mIiwiY2xhc3NMaXN0IiwiaXNJbnNpZGVZb3V0dWJlVmlkZW8iLCJvdmVyZmxvd2luZ0FuY2VzdG9yIiwiaXNDb250ZW50RWRpdGFibGUiLCJjbGllbnRIZWlnaHQiLCJkb3duIiwiYXJyb3dTY3JvbGwiLCJhcnJvd0tleXMiLCJzY3JvbGxSZW1haW5pbmciLCJzY3JvbGwiLCJ1cCIsInNoaWZ0S2V5IiwicGFnZWRvd24iLCJtb3VzZWRvd24iLCJzY3JvbGxpbmdFbGVtZW50IiwiZW5kIiwidW5pcXVlSUQiLCJyaWdodCIsImNhY2hlWCIsImNhY2hlWSIsImNsZWFyQ2FjaGVUaW1lciIsImVsZW1zIiwicm9vdFNjcm9sbEhlaWdodCIsImdldENhY2hlIiwiY2FjaGVkIiwiY2FjaGUiLCJ0b3BPdmVyZmxvd3NOb3RIaWRkZW4iLCJpc092ZXJmbG93Q1NTIiwib3ZlcmZsb3dBdXRvT3JTY3JvbGwiLCJpc0NvbnRlbnRPdmVyZmxvd2luZyIsInNldENhY2hlIiwib3ZlcmZsb3dOb3RIaWRkZW4iLCJvdmVyZmxvdyIsInBhcmVudEVsZW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiZ2V0UHJvcGVydHlWYWx1ZSIsImZuIiwiYXJnIiwidG9Mb3dlckNhc2UiLCJ0YWciLCJib2R5U2Nyb2xsVG9wIiwiZG9jRWxTY3JvbGxUb3AiLCJkaXZpc29yIiwiU0NST0xMX1JPT1QiLCJ3aGVlbE9wdCIsInB1bHNlU2NhbGUiLCJ3aGVlbEV2ZW50IiwidmFsIiwiZXhwIiwib3B0aW9uc1RvU2V0IiwiZGVmYXVsdE9wdGlvbnMiLCJoYXNPd25Qcm9wZXJ0eSIsIm5hdmlnYXRvciIsInBsYXRmb3JtIiwiMzciLCIzOCIsIjM5IiwiNDAiLCJzcGxpdCIsIndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSIsIm1velJlcXVlc3RBbmltYXRpb25GcmFtZSIsImNhbGxiYWNrIiwiZWxlbWVudCIsImRlbGF5IiwiV2ViS2l0TXV0YXRpb25PYnNlcnZlciIsIk1vek11dGF0aW9uT2JzZXJ2ZXIiLCJkdW1teSIsImNzc1RleHQiLCJzY3JvbGxCeSIsInVzZXJBZ2VudCIsImlzRWRnZSIsImlzU2FmYXJpIiwiaXNNb2JpbGUiLCJpc0lFV2luNyIsImlzRW5hYmxlZEZvckJyb3dzZXIiLCJzdXBwb3J0c1Bhc3NpdmUiLCJnZXQiLCJwYXNzaXZlIiwicmVtb3ZlRXZlbnQiLCJkaXNjb25uZWN0IiwiZGVmaW5lIiwiYW1kIiwiZXhwb3J0cyIsIl90eXBlb2YiLCJtb2R1bGUiLCJvblJlc2l6ZSIsIndpZHRoIiwibmF2X2JhciIsIm5hdl9tZW51Iiwic2hvdyIsIm9uU2Nyb2xsIiwic2Nyb2xsUG9zIiwiY3VyckxpbmsiLCJ0aGlzIiwiYXR0ciIsInJlZkVsZW1lbnQiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwicmVhZHkiLCJ0b2dnbGVDbGFzcyIsInRvZ2dsZSIsIm9mZiIsIiR0YXJnZXQiLCJvZmZzZXQiLCJhbmltYXRlIiwic3RvcCJdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQ0FBO0FDQUE7YUNBQUEsRUFBRSxpQkFBaUJDLE9BQU8sU0FBVUMsR0FBbENGLEVBQUFHLE1BQ01DLEtBQU0sT0FDUkQsSUFEUSwwQkFFTkUsS0FBTUwsRUFBQSxpQkFESE0sWUFFSEYsUUFGRyxTQUFBRyxHQUdLLEdBQUFBLEVBQ1JDLEVBQVMsdUJBQWdCQyxLQUFBLHNHQUVmLEdBQUFGLEVBRE5QLEVBQUEsdUJBR29CUyxLQUFBLG9HQUdYRixHQUFKQSxJ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QUFBQSxVQUFBQSxHQUFBQSxTQUFBQSxVQUtBdFAsRUFBRSxnQkFBZ0JlLEdBQUcsUUFBUyxTQUFVYixHQUR4Q0EsRUFBQVcsaUJBQ0ViLEVBQUFvQixVQUFGa1AsSUFBQSxVQUNJcFEsV0FDQUYsRUFBRW9CLFlBQWMsd0JBQ2hCa08sRUFBQUEsS0FBQUEsS0FBQUEsV0FDQUUsRUFBQUEsTUFBUVMsWUFBWSxVQUNsQmpRLEVBQUY4UCxNQUFZMUcsU0FBQTZHLFlBQVksWUFFcEJqUSxFQUFBQSxNQUFFa1EsU0FBTTlHLFVBQ1hwSixFQUhEOFAsTUFBQTFHLFNBQUE4RyxTQUFBLFVBS0FsUSxJQUFFK0csRUFBTXFDLEtBQVM4RyxLQUdiSyxFQUFVdlEsRUFBRStHLEdBQVF5SixTQUFTeE8sSUFBTSxHQUF2Q2hDLEVBQUEsY0FBZ0IrRyxPQUFGMEosU0FHVi9KLFVBQWE2SixHQURmLElBQUEsUUFBY0csV0FFYjFRLEVBRkhvQixVQUFBTCxHQUVnQixTQUFZNE87QUMvQnBDO0FDQUEiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiOyIsIlwidXNlIHN0cmljdFwiOyIsIlwidXNlIHN0cmljdFwiOyIsIlwidXNlIHN0cmljdFwiOyIsIiQoXCIuY29udGFjdC1mb3JtXCIpLnN1Ym1pdChmdW5jdGlvbiAoZSkge1xyXG4gICAgdmFyIHVybCA9IFwiY29udGFjdC1mb3JtLXNlbmRlci5waHBcIjtcclxuICAgICQuYWpheCh7XHJcbiAgICAgICAgdHlwZTogXCJQT1NUXCIsXHJcbiAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgZGF0YTogJChcIi5jb250YWN0LWZvcm1cIikuc2VyaWFsaXplKCksXHJcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgaWYgKGRhdGEgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgJChcIi5jb250YWN0LWZvcm0tYWxlcnRcIikuaHRtbCgnPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LWRhbmdlclwiIHJvbGU9XCJhbGVydFwiPkNvxZsgcG9zesWCbyBuaWUgdGFrISBQcm9zesSZIHNwcmF3ZHppxIcgZm9ybXVsYXJ6LjwvZGl2PicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGRhdGEgPT0gMikge1xyXG4gICAgICAgICAgICAgICAgJChcIi5jb250YWN0LWZvcm0tYWxlcnRcIikuaHRtbCgnPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LWRhbmdlclwiIHJvbGU9XCJhbGVydFwiPkNvxZsgcG9zesWCbyBuaWUgdGFrISBQcm9zesSZIHNwcsOzYm93YcSHIHBvxbxuaWVqLjwvZGl2PicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGRhdGEgPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgJChcIi5jb250YWN0LWZvcm0tYWxlcnRcIikuaHRtbCgnPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXN1Y2Nlc3NcIiByb2xlPVwiYWxlcnRcIj5XaWFkb21vxZvEhyB6b3N0YcWCYSB3eXPFgmFuYSBwb215xZtsbmllITwvZGl2PicpO1xyXG4gICAgICAgICAgICAgICAgJChcIi5jb250YWN0LWZvcm1cIikudHJpZ2dlcigncmVzZXQnKTtcclxuICAgICAgICAgICAgICAgICQoXCIuY29udGFjdC1mb3JtLWFsZXJ0XCIpLmZhZGVPdXQoNDAwMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoXCIuY29udGFjdC1mb3JtLWFsZXJ0XCIpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbn0pOyAiLCJcInVzZSBzdHJpY3RcIjsiLCJcInVzZSBzdHJpY3RcIjsiLCJcInVzZSBzdHJpY3RcIjsiLCIvL1ByZWxvYWRlclxyXG4kKHdpbmRvdykub24oXCJsb2FkXCIsIGZ1bmN0aW9uKCkge1xyXG4gIGNvbnN0IHByZWxvYWRlckZhZGVPdXRUaW1lID0gNTAwO1xyXG4gIGZ1bmN0aW9uIGhpZGVQcmVsb2FkZXIoKSB7XHJcbiAgICBjb25zdCBwcmVsb2FkZXIgPSAkKFwiLnNwaW5uZXItd3JhcHBlclwiKTtcclxuICAgIHByZWxvYWRlci5mYWRlT3V0KHByZWxvYWRlckZhZGVPdXRUaW1lKTtcclxuICB9XHJcbiAgaGlkZVByZWxvYWRlcigpO1xyXG59KTtcclxuXHJcbi8vIHNtb290aHNjcm9sbFxyXG4oZnVuY3Rpb24oKSB7XHJcbiAgLy8gU2Nyb2xsIFZhcmlhYmxlcyAodHdlYWthYmxlKVxyXG4gIHZhciBkZWZhdWx0T3B0aW9ucyA9IHtcclxuICAgIC8vIFNjcm9sbGluZyBDb3JlXHJcbiAgICBmcmFtZVJhdGU6IDE1MCwgLy8gW0h6XVxyXG4gICAgYW5pbWF0aW9uVGltZTogNDAwLCAvLyBbbXNdXHJcbiAgICBzdGVwU2l6ZTogMTAwLCAvLyBbcHhdXHJcblxyXG4gICAgLy8gUHVsc2UgKGxlc3MgdHdlYWthYmxlKVxyXG4gICAgLy8gcmF0aW8gb2YgXCJ0YWlsXCIgdG8gXCJhY2NlbGVyYXRpb25cIlxyXG4gICAgcHVsc2VBbGdvcml0aG06IHRydWUsXHJcbiAgICBwdWxzZVNjYWxlOiA0LFxyXG4gICAgcHVsc2VOb3JtYWxpemU6IDEsXHJcblxyXG4gICAgLy8gQWNjZWxlcmF0aW9uXHJcbiAgICBhY2NlbGVyYXRpb25EZWx0YTogNTAsIC8vIDUwXHJcbiAgICBhY2NlbGVyYXRpb25NYXg6IDMsIC8vIDNcclxuXHJcbiAgICAvLyBLZXlib2FyZCBTZXR0aW5nc1xyXG4gICAga2V5Ym9hcmRTdXBwb3J0OiB0cnVlLCAvLyBvcHRpb25cclxuICAgIGFycm93U2Nyb2xsOiA1MCwgLy8gW3B4XVxyXG5cclxuICAgIC8vIE90aGVyXHJcbiAgICBmaXhlZEJhY2tncm91bmQ6IHRydWUsXHJcbiAgICBleGNsdWRlZDogXCJcIlxyXG4gIH07XHJcblxyXG4gIHZhciBvcHRpb25zID0gZGVmYXVsdE9wdGlvbnM7XHJcblxyXG4gIC8vIE90aGVyIFZhcmlhYmxlc1xyXG4gIHZhciBpc0V4Y2x1ZGVkID0gZmFsc2U7XHJcbiAgdmFyIGlzRnJhbWUgPSBmYWxzZTtcclxuICB2YXIgZGlyZWN0aW9uID0geyB4OiAwLCB5OiAwIH07XHJcbiAgdmFyIGluaXREb25lID0gZmFsc2U7XHJcbiAgdmFyIHJvb3QgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XHJcbiAgdmFyIGFjdGl2ZUVsZW1lbnQ7XHJcbiAgdmFyIG9ic2VydmVyO1xyXG4gIHZhciByZWZyZXNoU2l6ZTtcclxuICB2YXIgZGVsdGFCdWZmZXIgPSBbXTtcclxuICB2YXIgZGVsdGFCdWZmZXJUaW1lcjtcclxuICB2YXIgaXNNYWMgPSAvXk1hYy8udGVzdChuYXZpZ2F0b3IucGxhdGZvcm0pO1xyXG5cclxuICB2YXIga2V5ID0ge1xyXG4gICAgbGVmdDogMzcsXHJcbiAgICB1cDogMzgsXHJcbiAgICByaWdodDogMzksXHJcbiAgICBkb3duOiA0MCxcclxuICAgIHNwYWNlYmFyOiAzMixcclxuICAgIHBhZ2V1cDogMzMsXHJcbiAgICBwYWdlZG93bjogMzQsXHJcbiAgICBlbmQ6IDM1LFxyXG4gICAgaG9tZTogMzZcclxuICB9O1xyXG4gIHZhciBhcnJvd0tleXMgPSB7IDM3OiAxLCAzODogMSwgMzk6IDEsIDQwOiAxIH07XHJcblxyXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAqIElOSVRJQUxJWkVcclxuICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gIC8qKlxyXG4gICAqIFRlc3RzIGlmIHNtb290aCBzY3JvbGxpbmcgaXMgYWxsb3dlZC4gU2h1dHMgZG93biBldmVyeXRoaW5nIGlmIG5vdC5cclxuICAgKi9cclxuICBmdW5jdGlvbiBpbml0VGVzdCgpIHtcclxuICAgIGlmIChvcHRpb25zLmtleWJvYXJkU3VwcG9ydCkge1xyXG4gICAgICBhZGRFdmVudChcImtleWRvd25cIiwga2V5ZG93bik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTZXRzIHVwIHNjcm9sbHMgYXJyYXksIGRldGVybWluZXMgaWYgZnJhbWVzIGFyZSBpbnZvbHZlZC5cclxuICAgKi9cclxuICBmdW5jdGlvbiBpbml0KCkge1xyXG4gICAgaWYgKGluaXREb25lIHx8ICFkb2N1bWVudC5ib2R5KSByZXR1cm47XHJcblxyXG4gICAgaW5pdERvbmUgPSB0cnVlO1xyXG5cclxuICAgIHZhciBib2R5ID0gZG9jdW1lbnQuYm9keTtcclxuICAgIHZhciBodG1sID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xyXG4gICAgdmFyIHdpbmRvd0hlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcclxuICAgIHZhciBzY3JvbGxIZWlnaHQgPSBib2R5LnNjcm9sbEhlaWdodDtcclxuXHJcbiAgICAvLyBjaGVjayBjb21wYXQgbW9kZSBmb3Igcm9vdCBlbGVtZW50XHJcbiAgICByb290ID0gZG9jdW1lbnQuY29tcGF0TW9kZS5pbmRleE9mKFwiQ1NTXCIpID49IDAgPyBodG1sIDogYm9keTtcclxuICAgIGFjdGl2ZUVsZW1lbnQgPSBib2R5O1xyXG5cclxuICAgIGluaXRUZXN0KCk7XHJcblxyXG4gICAgLy8gQ2hlY2tzIGlmIHRoaXMgc2NyaXB0IGlzIHJ1bm5pbmcgaW4gYSBmcmFtZVxyXG4gICAgaWYgKHRvcCAhPSBzZWxmKSB7XHJcbiAgICAgIGlzRnJhbWUgPSB0cnVlO1xyXG4gICAgfSBlbHNlIGlmIChcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNhZmFyaSAxMCBmaXhlZCBpdCwgQ2hyb21lIGZpeGVkIGl0IGluIHY0NTpcclxuICAgICAqIFRoaXMgZml4ZXMgYSBidWcgd2hlcmUgdGhlIGFyZWFzIGxlZnQgYW5kIHJpZ2h0IHRvXHJcbiAgICAgKiB0aGUgY29udGVudCBkb2VzIG5vdCB0cmlnZ2VyIHRoZSBvbm1vdXNld2hlZWwgZXZlbnRcclxuICAgICAqIG9uIHNvbWUgcGFnZXMuIGUuZy46IGh0bWwsIGJvZHkgeyBoZWlnaHQ6IDEwMCUgfVxyXG4gICAgICovXHJcbiAgICAgIGlzT2xkU2FmYXJpICYmXHJcbiAgICAgIHNjcm9sbEhlaWdodCA+IHdpbmRvd0hlaWdodCAmJlxyXG4gICAgICAoYm9keS5vZmZzZXRIZWlnaHQgPD0gd2luZG93SGVpZ2h0IHx8IGh0bWwub2Zmc2V0SGVpZ2h0IDw9IHdpbmRvd0hlaWdodClcclxuICAgICkge1xyXG4gICAgICB2YXIgZnVsbFBhZ2VFbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgZnVsbFBhZ2VFbGVtLnN0eWxlLmNzc1RleHQgPVxyXG4gICAgICAgIFwicG9zaXRpb246YWJzb2x1dGU7IHotaW5kZXg6LTEwMDAwOyBcIiArXHJcbiAgICAgICAgXCJ0b3A6MDsgbGVmdDowOyByaWdodDowOyBoZWlnaHQ6XCIgK1xyXG4gICAgICAgIHJvb3Quc2Nyb2xsSGVpZ2h0ICtcclxuICAgICAgICBcInB4XCI7XHJcbiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZnVsbFBhZ2VFbGVtKTtcclxuXHJcbiAgICAgIC8vIERPTSBjaGFuZ2VkICh0aHJvdHRsZWQpIHRvIGZpeCBoZWlnaHRcclxuICAgICAgdmFyIHBlbmRpbmdSZWZyZXNoO1xyXG4gICAgICByZWZyZXNoU2l6ZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmIChwZW5kaW5nUmVmcmVzaCkgcmV0dXJuOyAvLyBjb3VsZCBhbHNvIGJlOiBjbGVhclRpbWVvdXQocGVuZGluZ1JlZnJlc2gpO1xyXG4gICAgICAgIHBlbmRpbmdSZWZyZXNoID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGlmIChpc0V4Y2x1ZGVkKSByZXR1cm47IC8vIGNvdWxkIGJlIHJ1bm5pbmcgYWZ0ZXIgY2xlYW51cFxyXG4gICAgICAgICAgZnVsbFBhZ2VFbGVtLnN0eWxlLmhlaWdodCA9IFwiMFwiO1xyXG4gICAgICAgICAgZnVsbFBhZ2VFbGVtLnN0eWxlLmhlaWdodCA9IHJvb3Quc2Nyb2xsSGVpZ2h0ICsgXCJweFwiO1xyXG4gICAgICAgICAgcGVuZGluZ1JlZnJlc2ggPSBudWxsO1xyXG4gICAgICAgIH0sIDUwMCk7IC8vIGFjdCByYXJlbHkgdG8gc3RheSBmYXN0XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBzZXRUaW1lb3V0KHJlZnJlc2hTaXplLCAxMCk7XHJcblxyXG4gICAgICBhZGRFdmVudChcInJlc2l6ZVwiLCByZWZyZXNoU2l6ZSk7XHJcblxyXG4gICAgICAvLyBUT0RPOiBhdHRyaWJ1dGVGaWx0ZXI/XHJcbiAgICAgIHZhciBjb25maWcgPSB7XHJcbiAgICAgICAgYXR0cmlidXRlczogdHJ1ZSxcclxuICAgICAgICBjaGlsZExpc3Q6IHRydWUsXHJcbiAgICAgICAgY2hhcmFjdGVyRGF0YTogZmFsc2VcclxuICAgICAgICAvLyBzdWJ0cmVlOiB0cnVlXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKHJlZnJlc2hTaXplKTtcclxuICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShib2R5LCBjb25maWcpO1xyXG5cclxuICAgICAgaWYgKHJvb3Qub2Zmc2V0SGVpZ2h0IDw9IHdpbmRvd0hlaWdodCkge1xyXG4gICAgICAgIHZhciBjbGVhcmZpeCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgY2xlYXJmaXguc3R5bGUuY2xlYXIgPSBcImJvdGhcIjtcclxuICAgICAgICBib2R5LmFwcGVuZENoaWxkKGNsZWFyZml4KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIGRpc2FibGUgZml4ZWQgYmFja2dyb3VuZFxyXG4gICAgaWYgKCFvcHRpb25zLmZpeGVkQmFja2dyb3VuZCAmJiAhaXNFeGNsdWRlZCkge1xyXG4gICAgICBib2R5LnN0eWxlLmJhY2tncm91bmRBdHRhY2htZW50ID0gXCJzY3JvbGxcIjtcclxuICAgICAgaHRtbC5zdHlsZS5iYWNrZ3JvdW5kQXR0YWNobWVudCA9IFwic2Nyb2xsXCI7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZW1vdmVzIGV2ZW50IGxpc3RlbmVycyBhbmQgb3RoZXIgdHJhY2VzIGxlZnQgb24gdGhlIHBhZ2UuXHJcbiAgICovXHJcbiAgZnVuY3Rpb24gY2xlYW51cCgpIHtcclxuICAgIG9ic2VydmVyICYmIG9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcclxuICAgIHJlbW92ZUV2ZW50KHdoZWVsRXZlbnQsIHdoZWVsKTtcclxuICAgIHJlbW92ZUV2ZW50KFwibW91c2Vkb3duXCIsIG1vdXNlZG93bik7XHJcbiAgICByZW1vdmVFdmVudChcImtleWRvd25cIiwga2V5ZG93bik7XHJcbiAgICByZW1vdmVFdmVudChcInJlc2l6ZVwiLCByZWZyZXNoU2l6ZSk7XHJcbiAgICByZW1vdmVFdmVudChcImxvYWRcIiwgaW5pdCk7XHJcbiAgfVxyXG5cclxuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICogU0NST0xMSU5HXHJcbiAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgdmFyIHF1ZSA9IFtdO1xyXG4gIHZhciBwZW5kaW5nID0gZmFsc2U7XHJcbiAgdmFyIGxhc3RTY3JvbGwgPSBEYXRlLm5vdygpO1xyXG5cclxuICAvKipcclxuICAgKiBQdXNoZXMgc2Nyb2xsIGFjdGlvbnMgdG8gdGhlIHNjcm9sbGluZyBxdWV1ZS5cclxuICAgKi9cclxuICBmdW5jdGlvbiBzY3JvbGxBcnJheShlbGVtLCBsZWZ0LCB0b3ApIHtcclxuICAgIGRpcmVjdGlvbkNoZWNrKGxlZnQsIHRvcCk7XHJcblxyXG4gICAgaWYgKG9wdGlvbnMuYWNjZWxlcmF0aW9uTWF4ICE9IDEpIHtcclxuICAgICAgdmFyIG5vdyA9IERhdGUubm93KCk7XHJcbiAgICAgIHZhciBlbGFwc2VkID0gbm93IC0gbGFzdFNjcm9sbDtcclxuICAgICAgaWYgKGVsYXBzZWQgPCBvcHRpb25zLmFjY2VsZXJhdGlvbkRlbHRhKSB7XHJcbiAgICAgICAgdmFyIGZhY3RvciA9ICgxICsgNTAgLyBlbGFwc2VkKSAvIDI7XHJcbiAgICAgICAgaWYgKGZhY3RvciA+IDEpIHtcclxuICAgICAgICAgIGZhY3RvciA9IE1hdGgubWluKGZhY3Rvciwgb3B0aW9ucy5hY2NlbGVyYXRpb25NYXgpO1xyXG4gICAgICAgICAgbGVmdCAqPSBmYWN0b3I7XHJcbiAgICAgICAgICB0b3AgKj0gZmFjdG9yO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBsYXN0U2Nyb2xsID0gRGF0ZS5ub3coKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBwdXNoIGEgc2Nyb2xsIGNvbW1hbmRcclxuICAgIHF1ZS5wdXNoKHtcclxuICAgICAgeDogbGVmdCxcclxuICAgICAgeTogdG9wLFxyXG4gICAgICBsYXN0WDogbGVmdCA8IDAgPyAwLjk5IDogLTAuOTksXHJcbiAgICAgIGxhc3RZOiB0b3AgPCAwID8gMC45OSA6IC0wLjk5LFxyXG4gICAgICBzdGFydDogRGF0ZS5ub3coKVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gZG9uJ3QgYWN0IGlmIHRoZXJlJ3MgYSBwZW5kaW5nIHF1ZXVlXHJcbiAgICBpZiAocGVuZGluZykge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHNjcm9sbFJvb3QgPSBnZXRTY3JvbGxSb290KCk7XHJcbiAgICB2YXIgaXNXaW5kb3dTY3JvbGwgPSBlbGVtID09PSBzY3JvbGxSb290IHx8IGVsZW0gPT09IGRvY3VtZW50LmJvZHk7XHJcblxyXG4gICAgLy8gaWYgd2UgaGF2ZW4ndCBhbHJlYWR5IGZpeGVkIHRoZSBiZWhhdmlvcixcclxuICAgIC8vIGFuZCBpdCBuZWVkcyBmaXhpbmcgZm9yIHRoaXMgc2VzaFxyXG4gICAgaWYgKGVsZW0uJHNjcm9sbEJlaGF2aW9yID09IG51bGwgJiYgaXNTY3JvbGxCZWhhdmlvclNtb290aChlbGVtKSkge1xyXG4gICAgICBlbGVtLiRzY3JvbGxCZWhhdmlvciA9IGVsZW0uc3R5bGUuc2Nyb2xsQmVoYXZpb3I7XHJcbiAgICAgIGVsZW0uc3R5bGUuc2Nyb2xsQmVoYXZpb3IgPSBcImF1dG9cIjtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgc3RlcCA9IGZ1bmN0aW9uKHRpbWUpIHtcclxuICAgICAgdmFyIG5vdyA9IERhdGUubm93KCk7XHJcbiAgICAgIHZhciBzY3JvbGxYID0gMDtcclxuICAgICAgdmFyIHNjcm9sbFkgPSAwO1xyXG5cclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBxdWUubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB2YXIgaXRlbSA9IHF1ZVtpXTtcclxuICAgICAgICB2YXIgZWxhcHNlZCA9IG5vdyAtIGl0ZW0uc3RhcnQ7XHJcbiAgICAgICAgdmFyIGZpbmlzaGVkID0gZWxhcHNlZCA+PSBvcHRpb25zLmFuaW1hdGlvblRpbWU7XHJcblxyXG4gICAgICAgIC8vIHNjcm9sbCBwb3NpdGlvbjogWzAsIDFdXHJcbiAgICAgICAgdmFyIHBvc2l0aW9uID0gZmluaXNoZWQgPyAxIDogZWxhcHNlZCAvIG9wdGlvbnMuYW5pbWF0aW9uVGltZTtcclxuXHJcbiAgICAgICAgLy8gZWFzaW5nIFtvcHRpb25hbF1cclxuICAgICAgICBpZiAob3B0aW9ucy5wdWxzZUFsZ29yaXRobSkge1xyXG4gICAgICAgICAgcG9zaXRpb24gPSBwdWxzZShwb3NpdGlvbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBvbmx5IG5lZWQgdGhlIGRpZmZlcmVuY2VcclxuICAgICAgICB2YXIgeCA9IChpdGVtLnggKiBwb3NpdGlvbiAtIGl0ZW0ubGFzdFgpID4+IDA7XHJcbiAgICAgICAgdmFyIHkgPSAoaXRlbS55ICogcG9zaXRpb24gLSBpdGVtLmxhc3RZKSA+PiAwO1xyXG5cclxuICAgICAgICAvLyBhZGQgdGhpcyB0byB0aGUgdG90YWwgc2Nyb2xsaW5nXHJcbiAgICAgICAgc2Nyb2xsWCArPSB4O1xyXG4gICAgICAgIHNjcm9sbFkgKz0geTtcclxuXHJcbiAgICAgICAgLy8gdXBkYXRlIGxhc3QgdmFsdWVzXHJcbiAgICAgICAgaXRlbS5sYXN0WCArPSB4O1xyXG4gICAgICAgIGl0ZW0ubGFzdFkgKz0geTtcclxuXHJcbiAgICAgICAgLy8gZGVsZXRlIGFuZCBzdGVwIGJhY2sgaWYgaXQncyBvdmVyXHJcbiAgICAgICAgaWYgKGZpbmlzaGVkKSB7XHJcbiAgICAgICAgICBxdWUuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgaS0tO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gc2Nyb2xsIGxlZnQgYW5kIHRvcFxyXG4gICAgICBpZiAoaXNXaW5kb3dTY3JvbGwpIHtcclxuICAgICAgICB3aW5kb3cuc2Nyb2xsQnkoc2Nyb2xsWCwgc2Nyb2xsWSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKHNjcm9sbFgpIGVsZW0uc2Nyb2xsTGVmdCArPSBzY3JvbGxYO1xyXG4gICAgICAgIGlmIChzY3JvbGxZKSBlbGVtLnNjcm9sbFRvcCArPSBzY3JvbGxZO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBjbGVhbiB1cCBpZiB0aGVyZSdzIG5vdGhpbmcgbGVmdCB0byBkb1xyXG4gICAgICBpZiAoIWxlZnQgJiYgIXRvcCkge1xyXG4gICAgICAgIHF1ZSA9IFtdO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAocXVlLmxlbmd0aCkge1xyXG4gICAgICAgIHJlcXVlc3RGcmFtZShzdGVwLCBlbGVtLCAxMDAwIC8gb3B0aW9ucy5mcmFtZVJhdGUgKyAxKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBwZW5kaW5nID0gZmFsc2U7XHJcbiAgICAgICAgLy8gcmVzdG9yZSBkZWZhdWx0IGJlaGF2aW9yIGF0IHRoZSBlbmQgb2Ygc2Nyb2xsaW5nIHNlc2hcclxuICAgICAgICBpZiAoZWxlbS4kc2Nyb2xsQmVoYXZpb3IgIT0gbnVsbCkge1xyXG4gICAgICAgICAgZWxlbS5zdHlsZS5zY3JvbGxCZWhhdmlvciA9IGVsZW0uJHNjcm9sbEJlaGF2aW9yO1xyXG4gICAgICAgICAgZWxlbS4kc2Nyb2xsQmVoYXZpb3IgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBzdGFydCBhIG5ldyBxdWV1ZSBvZiBhY3Rpb25zXHJcbiAgICByZXF1ZXN0RnJhbWUoc3RlcCwgZWxlbSwgMCk7XHJcbiAgICBwZW5kaW5nID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAqIEVWRU5UU1xyXG4gICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgLyoqXHJcbiAgICogTW91c2Ugd2hlZWwgaGFuZGxlci5cclxuICAgKiBAcGFyYW0ge09iamVjdH0gZXZlbnRcclxuICAgKi9cclxuICBmdW5jdGlvbiB3aGVlbChldmVudCkge1xyXG4gICAgaWYgKCFpbml0RG9uZSkge1xyXG4gICAgICBpbml0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldDtcclxuXHJcbiAgICAvLyBsZWF2ZSBlYXJseSBpZiBkZWZhdWx0IGFjdGlvbiBpcyBwcmV2ZW50ZWRcclxuICAgIC8vIG9yIGl0J3MgYSB6b29taW5nIGV2ZW50IHdpdGggQ1RSTFxyXG4gICAgaWYgKGV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQgfHwgZXZlbnQuY3RybEtleSkge1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBsZWF2ZSBlbWJlZGRlZCBjb250ZW50IGFsb25lIChmbGFzaCAmIHBkZilcclxuICAgIGlmIChcclxuICAgICAgaXNOb2RlTmFtZShhY3RpdmVFbGVtZW50LCBcImVtYmVkXCIpIHx8XHJcbiAgICAgIChpc05vZGVOYW1lKHRhcmdldCwgXCJlbWJlZFwiKSAmJiAvXFwucGRmL2kudGVzdCh0YXJnZXQuc3JjKSkgfHxcclxuICAgICAgaXNOb2RlTmFtZShhY3RpdmVFbGVtZW50LCBcIm9iamVjdFwiKSB8fFxyXG4gICAgICB0YXJnZXQuc2hhZG93Um9vdFxyXG4gICAgKSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBkZWx0YVggPSAtZXZlbnQud2hlZWxEZWx0YVggfHwgZXZlbnQuZGVsdGFYIHx8IDA7XHJcbiAgICB2YXIgZGVsdGFZID0gLWV2ZW50LndoZWVsRGVsdGFZIHx8IGV2ZW50LmRlbHRhWSB8fCAwO1xyXG5cclxuICAgIGlmIChpc01hYykge1xyXG4gICAgICBpZiAoZXZlbnQud2hlZWxEZWx0YVggJiYgaXNEaXZpc2libGUoZXZlbnQud2hlZWxEZWx0YVgsIDEyMCkpIHtcclxuICAgICAgICBkZWx0YVggPSAtMTIwICogKGV2ZW50LndoZWVsRGVsdGFYIC8gTWF0aC5hYnMoZXZlbnQud2hlZWxEZWx0YVgpKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoZXZlbnQud2hlZWxEZWx0YVkgJiYgaXNEaXZpc2libGUoZXZlbnQud2hlZWxEZWx0YVksIDEyMCkpIHtcclxuICAgICAgICBkZWx0YVkgPSAtMTIwICogKGV2ZW50LndoZWVsRGVsdGFZIC8gTWF0aC5hYnMoZXZlbnQud2hlZWxEZWx0YVkpKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIHVzZSB3aGVlbERlbHRhIGlmIGRlbHRhWC9ZIGlzIG5vdCBhdmFpbGFibGVcclxuICAgIGlmICghZGVsdGFYICYmICFkZWx0YVkpIHtcclxuICAgICAgZGVsdGFZID0gLWV2ZW50LndoZWVsRGVsdGEgfHwgMDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBsaW5lIGJhc2VkIHNjcm9sbGluZyAoRmlyZWZveCBtb3N0bHkpXHJcbiAgICBpZiAoZXZlbnQuZGVsdGFNb2RlID09PSAxKSB7XHJcbiAgICAgIGRlbHRhWCAqPSA0MDtcclxuICAgICAgZGVsdGFZICo9IDQwO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBvdmVyZmxvd2luZyA9IG92ZXJmbG93aW5nQW5jZXN0b3IodGFyZ2V0KTtcclxuXHJcbiAgICAvLyBub3RoaW5nIHRvIGRvIGlmIHRoZXJlJ3Mgbm8gZWxlbWVudCB0aGF0J3Mgc2Nyb2xsYWJsZVxyXG4gICAgaWYgKCFvdmVyZmxvd2luZykge1xyXG4gICAgICAvLyBleGNlcHQgQ2hyb21lIGlmcmFtZXMgc2VlbSB0byBlYXQgd2hlZWwgZXZlbnRzLCB3aGljaCB3ZSBuZWVkIHRvXHJcbiAgICAgIC8vIHByb3BhZ2F0ZSB1cCwgaWYgdGhlIGlmcmFtZSBoYXMgbm90aGluZyBvdmVyZmxvd2luZyB0byBzY3JvbGxcclxuICAgICAgaWYgKGlzRnJhbWUgJiYgaXNDaHJvbWUpIHtcclxuICAgICAgICAvLyBjaGFuZ2UgdGFyZ2V0IHRvIGlmcmFtZSBlbGVtZW50IGl0c2VsZiBmb3IgdGhlIHBhcmVudCBmcmFtZVxyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShldmVudCwgXCJ0YXJnZXRcIiwgeyB2YWx1ZTogd2luZG93LmZyYW1lRWxlbWVudCB9KTtcclxuICAgICAgICByZXR1cm4gcGFyZW50LndoZWVsKGV2ZW50KTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBjaGVjayBpZiBpdCdzIGEgdG91Y2hwYWQgc2Nyb2xsIHRoYXQgc2hvdWxkIGJlIGlnbm9yZWRcclxuICAgIGlmIChpc1RvdWNocGFkKGRlbHRhWSkpIHtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gc2NhbGUgYnkgc3RlcCBzaXplXHJcbiAgICAvLyBkZWx0YSBpcyAxMjAgbW9zdCBvZiB0aGUgdGltZVxyXG4gICAgLy8gc3luYXB0aWNzIHNlZW1zIHRvIHNlbmQgMSBzb21ldGltZXNcclxuICAgIGlmIChNYXRoLmFicyhkZWx0YVgpID4gMS4yKSB7XHJcbiAgICAgIGRlbHRhWCAqPSBvcHRpb25zLnN0ZXBTaXplIC8gMTIwO1xyXG4gICAgfVxyXG4gICAgaWYgKE1hdGguYWJzKGRlbHRhWSkgPiAxLjIpIHtcclxuICAgICAgZGVsdGFZICo9IG9wdGlvbnMuc3RlcFNpemUgLyAxMjA7XHJcbiAgICB9XHJcblxyXG4gICAgc2Nyb2xsQXJyYXkob3ZlcmZsb3dpbmcsIGRlbHRhWCwgZGVsdGFZKTtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBzY2hlZHVsZUNsZWFyQ2FjaGUoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEtleWRvd24gZXZlbnQgaGFuZGxlci5cclxuICAgKiBAcGFyYW0ge09iamVjdH0gZXZlbnRcclxuICAgKi9cclxuICBmdW5jdGlvbiBrZXlkb3duKGV2ZW50KSB7XHJcbiAgICB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0O1xyXG4gICAgdmFyIG1vZGlmaWVyID1cclxuICAgICAgZXZlbnQuY3RybEtleSB8fFxyXG4gICAgICBldmVudC5hbHRLZXkgfHxcclxuICAgICAgZXZlbnQubWV0YUtleSB8fFxyXG4gICAgICAoZXZlbnQuc2hpZnRLZXkgJiYgZXZlbnQua2V5Q29kZSAhPT0ga2V5LnNwYWNlYmFyKTtcclxuXHJcbiAgICAvLyBvdXIgb3duIHRyYWNrZWQgYWN0aXZlIGVsZW1lbnQgY291bGQndmUgYmVlbiByZW1vdmVkIGZyb20gdGhlIERPTVxyXG4gICAgaWYgKCFkb2N1bWVudC5ib2R5LmNvbnRhaW5zKGFjdGl2ZUVsZW1lbnQpKSB7XHJcbiAgICAgIGFjdGl2ZUVsZW1lbnQgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGRvIG5vdGhpbmcgaWYgdXNlciBpcyBlZGl0aW5nIHRleHRcclxuICAgIC8vIG9yIHVzaW5nIGEgbW9kaWZpZXIga2V5IChleGNlcHQgc2hpZnQpXHJcbiAgICAvLyBvciBpbiBhIGRyb3Bkb3duXHJcbiAgICAvLyBvciBpbnNpZGUgaW50ZXJhY3RpdmUgZWxlbWVudHNcclxuICAgIHZhciBpbnB1dE5vZGVOYW1lcyA9IC9eKHRleHRhcmVhfHNlbGVjdHxlbWJlZHxvYmplY3QpJC9pO1xyXG4gICAgdmFyIGJ1dHRvblR5cGVzID0gL14oYnV0dG9ufHN1Ym1pdHxyYWRpb3xjaGVja2JveHxmaWxlfGNvbG9yfGltYWdlKSQvaTtcclxuICAgIGlmIChcclxuICAgICAgZXZlbnQuZGVmYXVsdFByZXZlbnRlZCB8fFxyXG4gICAgICBpbnB1dE5vZGVOYW1lcy50ZXN0KHRhcmdldC5ub2RlTmFtZSkgfHxcclxuICAgICAgKGlzTm9kZU5hbWUodGFyZ2V0LCBcImlucHV0XCIpICYmICFidXR0b25UeXBlcy50ZXN0KHRhcmdldC50eXBlKSkgfHxcclxuICAgICAgaXNOb2RlTmFtZShhY3RpdmVFbGVtZW50LCBcInZpZGVvXCIpIHx8XHJcbiAgICAgIGlzSW5zaWRlWW91dHViZVZpZGVvKGV2ZW50KSB8fFxyXG4gICAgICB0YXJnZXQuaXNDb250ZW50RWRpdGFibGUgfHxcclxuICAgICAgbW9kaWZpZXJcclxuICAgICkge1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBbc3BhY2ViYXJdIHNob3VsZCB0cmlnZ2VyIGJ1dHRvbiBwcmVzcywgbGVhdmUgaXQgYWxvbmVcclxuICAgIGlmIChcclxuICAgICAgKGlzTm9kZU5hbWUodGFyZ2V0LCBcImJ1dHRvblwiKSB8fFxyXG4gICAgICAgIChpc05vZGVOYW1lKHRhcmdldCwgXCJpbnB1dFwiKSAmJiBidXR0b25UeXBlcy50ZXN0KHRhcmdldC50eXBlKSkpICYmXHJcbiAgICAgIGV2ZW50LmtleUNvZGUgPT09IGtleS5zcGFjZWJhclxyXG4gICAgKSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFthcnJ3b3cga2V5c10gb24gcmFkaW8gYnV0dG9ucyBzaG91bGQgYmUgbGVmdCBhbG9uZVxyXG4gICAgaWYgKFxyXG4gICAgICBpc05vZGVOYW1lKHRhcmdldCwgXCJpbnB1dFwiKSAmJlxyXG4gICAgICB0YXJnZXQudHlwZSA9PSBcInJhZGlvXCIgJiZcclxuICAgICAgYXJyb3dLZXlzW2V2ZW50LmtleUNvZGVdXHJcbiAgICApIHtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHNoaWZ0LFxyXG4gICAgICB4ID0gMCxcclxuICAgICAgeSA9IDA7XHJcbiAgICB2YXIgb3ZlcmZsb3dpbmcgPSBvdmVyZmxvd2luZ0FuY2VzdG9yKGFjdGl2ZUVsZW1lbnQpO1xyXG5cclxuICAgIGlmICghb3ZlcmZsb3dpbmcpIHtcclxuICAgICAgLy8gQ2hyb21lIGlmcmFtZXMgc2VlbSB0byBlYXQga2V5IGV2ZW50cywgd2hpY2ggd2UgbmVlZCB0b1xyXG4gICAgICAvLyBwcm9wYWdhdGUgdXAsIGlmIHRoZSBpZnJhbWUgaGFzIG5vdGhpbmcgb3ZlcmZsb3dpbmcgdG8gc2Nyb2xsXHJcbiAgICAgIHJldHVybiBpc0ZyYW1lICYmIGlzQ2hyb21lID8gcGFyZW50LmtleWRvd24oZXZlbnQpIDogdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgY2xpZW50SGVpZ2h0ID0gb3ZlcmZsb3dpbmcuY2xpZW50SGVpZ2h0O1xyXG5cclxuICAgIGlmIChvdmVyZmxvd2luZyA9PSBkb2N1bWVudC5ib2R5KSB7XHJcbiAgICAgIGNsaWVudEhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcclxuICAgIH1cclxuXHJcbiAgICBzd2l0Y2ggKGV2ZW50LmtleUNvZGUpIHtcclxuICAgICAgY2FzZSBrZXkudXA6XHJcbiAgICAgICAgeSA9IC1vcHRpb25zLmFycm93U2Nyb2xsO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIGtleS5kb3duOlxyXG4gICAgICAgIHkgPSBvcHRpb25zLmFycm93U2Nyb2xsO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIGtleS5zcGFjZWJhcjogLy8gKCsgc2hpZnQpXHJcbiAgICAgICAgc2hpZnQgPSBldmVudC5zaGlmdEtleSA/IDEgOiAtMTtcclxuICAgICAgICB5ID0gLXNoaWZ0ICogY2xpZW50SGVpZ2h0ICogMC45O1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIGtleS5wYWdldXA6XHJcbiAgICAgICAgeSA9IC1jbGllbnRIZWlnaHQgKiAwLjk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2Uga2V5LnBhZ2Vkb3duOlxyXG4gICAgICAgIHkgPSBjbGllbnRIZWlnaHQgKiAwLjk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2Uga2V5LmhvbWU6XHJcbiAgICAgICAgaWYgKG92ZXJmbG93aW5nID09IGRvY3VtZW50LmJvZHkgJiYgZG9jdW1lbnQuc2Nyb2xsaW5nRWxlbWVudClcclxuICAgICAgICAgIG92ZXJmbG93aW5nID0gZG9jdW1lbnQuc2Nyb2xsaW5nRWxlbWVudDtcclxuICAgICAgICB5ID0gLW92ZXJmbG93aW5nLnNjcm9sbFRvcDtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBrZXkuZW5kOlxyXG4gICAgICAgIHZhciBzY3JvbGwgPSBvdmVyZmxvd2luZy5zY3JvbGxIZWlnaHQgLSBvdmVyZmxvd2luZy5zY3JvbGxUb3A7XHJcbiAgICAgICAgdmFyIHNjcm9sbFJlbWFpbmluZyA9IHNjcm9sbCAtIGNsaWVudEhlaWdodDtcclxuICAgICAgICB5ID0gc2Nyb2xsUmVtYWluaW5nID4gMCA/IHNjcm9sbFJlbWFpbmluZyArIDEwIDogMDtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBrZXkubGVmdDpcclxuICAgICAgICB4ID0gLW9wdGlvbnMuYXJyb3dTY3JvbGw7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2Uga2V5LnJpZ2h0OlxyXG4gICAgICAgIHggPSBvcHRpb25zLmFycm93U2Nyb2xsO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIHJldHVybiB0cnVlOyAvLyBhIGtleSB3ZSBkb24ndCBjYXJlIGFib3V0XHJcbiAgICB9XHJcblxyXG4gICAgc2Nyb2xsQXJyYXkob3ZlcmZsb3dpbmcsIHgsIHkpO1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIHNjaGVkdWxlQ2xlYXJDYWNoZSgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogTW91c2Vkb3duIGV2ZW50IG9ubHkgZm9yIHVwZGF0aW5nIGFjdGl2ZUVsZW1lbnRcclxuICAgKi9cclxuICBmdW5jdGlvbiBtb3VzZWRvd24oZXZlbnQpIHtcclxuICAgIGFjdGl2ZUVsZW1lbnQgPSBldmVudC50YXJnZXQ7XHJcbiAgfVxyXG5cclxuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgKiBPVkVSRkxPV1xyXG4gICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgdmFyIHVuaXF1ZUlEID0gKGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIGkgPSAwO1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uKGVsKSB7XHJcbiAgICAgIHJldHVybiBlbC51bmlxdWVJRCB8fCAoZWwudW5pcXVlSUQgPSBpKyspO1xyXG4gICAgfTtcclxuICB9KSgpO1xyXG5cclxuICB2YXIgY2FjaGVYID0ge307IC8vIGNsZWFyZWQgb3V0IGFmdGVyIGEgc2Nyb2xsaW5nIHNlc3Npb25cclxuICB2YXIgY2FjaGVZID0ge307IC8vIGNsZWFyZWQgb3V0IGFmdGVyIGEgc2Nyb2xsaW5nIHNlc3Npb25cclxuICB2YXIgY2xlYXJDYWNoZVRpbWVyO1xyXG4gIHZhciBzbW9vdGhCZWhhdmlvckZvckVsZW1lbnQgPSB7fTtcclxuXHJcbiAgLy9zZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7IGNhY2hlID0ge307IH0sIDEwICogMTAwMCk7XHJcblxyXG4gIGZ1bmN0aW9uIHNjaGVkdWxlQ2xlYXJDYWNoZSgpIHtcclxuICAgIGNsZWFyVGltZW91dChjbGVhckNhY2hlVGltZXIpO1xyXG4gICAgY2xlYXJDYWNoZVRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XHJcbiAgICAgIGNhY2hlWCA9IGNhY2hlWSA9IHNtb290aEJlaGF2aW9yRm9yRWxlbWVudCA9IHt9O1xyXG4gICAgfSwgMSAqIDEwMDApO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2V0Q2FjaGUoZWxlbXMsIG92ZXJmbG93aW5nLCB4KSB7XHJcbiAgICB2YXIgY2FjaGUgPSB4ID8gY2FjaGVYIDogY2FjaGVZO1xyXG4gICAgZm9yICh2YXIgaSA9IGVsZW1zLmxlbmd0aDsgaS0tOyApIGNhY2hlW3VuaXF1ZUlEKGVsZW1zW2ldKV0gPSBvdmVyZmxvd2luZztcclxuICAgIHJldHVybiBvdmVyZmxvd2luZztcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGdldENhY2hlKGVsLCB4KSB7XHJcbiAgICByZXR1cm4gKHggPyBjYWNoZVggOiBjYWNoZVkpW3VuaXF1ZUlEKGVsKV07XHJcbiAgfVxyXG5cclxuICAvLyAgKGJvZHkpICAgICAgICAgICAgICAgIChyb290KVxyXG4gIC8vICAgICAgICAgfCBoaWRkZW4gfCB2aXNpYmxlIHwgc2Nyb2xsIHwgIGF1dG8gIHxcclxuICAvLyBoaWRkZW4gIHwgICBubyAgIHwgICAgbm8gICB8ICAgWUVTICB8ICAgWUVTICB8XHJcbiAgLy8gdmlzaWJsZSB8ICAgbm8gICB8ICAgWUVTICAgfCAgIFlFUyAgfCAgIFlFUyAgfFxyXG4gIC8vIHNjcm9sbCAgfCAgIG5vICAgfCAgIFlFUyAgIHwgICBZRVMgIHwgICBZRVMgIHxcclxuICAvLyBhdXRvICAgIHwgICBubyAgIHwgICBZRVMgICB8ICAgWUVTICB8ICAgWUVTICB8XHJcblxyXG4gIGZ1bmN0aW9uIG92ZXJmbG93aW5nQW5jZXN0b3IoZWwpIHtcclxuICAgIHZhciBlbGVtcyA9IFtdO1xyXG4gICAgdmFyIGJvZHkgPSBkb2N1bWVudC5ib2R5O1xyXG4gICAgdmFyIHJvb3RTY3JvbGxIZWlnaHQgPSByb290LnNjcm9sbEhlaWdodDtcclxuICAgIGRvIHtcclxuICAgICAgdmFyIGNhY2hlZCA9IGdldENhY2hlKGVsLCBmYWxzZSk7XHJcbiAgICAgIGlmIChjYWNoZWQpIHtcclxuICAgICAgICByZXR1cm4gc2V0Q2FjaGUoZWxlbXMsIGNhY2hlZCk7XHJcbiAgICAgIH1cclxuICAgICAgZWxlbXMucHVzaChlbCk7XHJcbiAgICAgIGlmIChyb290U2Nyb2xsSGVpZ2h0ID09PSBlbC5zY3JvbGxIZWlnaHQpIHtcclxuICAgICAgICB2YXIgdG9wT3ZlcmZsb3dzTm90SGlkZGVuID1cclxuICAgICAgICAgIG92ZXJmbG93Tm90SGlkZGVuKHJvb3QpICYmIG92ZXJmbG93Tm90SGlkZGVuKGJvZHkpO1xyXG4gICAgICAgIHZhciBpc092ZXJmbG93Q1NTID0gdG9wT3ZlcmZsb3dzTm90SGlkZGVuIHx8IG92ZXJmbG93QXV0b09yU2Nyb2xsKHJvb3QpO1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgIChpc0ZyYW1lICYmIGlzQ29udGVudE92ZXJmbG93aW5nKHJvb3QpKSB8fFxyXG4gICAgICAgICAgKCFpc0ZyYW1lICYmIGlzT3ZlcmZsb3dDU1MpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICByZXR1cm4gc2V0Q2FjaGUoZWxlbXMsIGdldFNjcm9sbFJvb3QoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2UgaWYgKGlzQ29udGVudE92ZXJmbG93aW5nKGVsKSAmJiBvdmVyZmxvd0F1dG9PclNjcm9sbChlbCkpIHtcclxuICAgICAgICByZXR1cm4gc2V0Q2FjaGUoZWxlbXMsIGVsKTtcclxuICAgICAgfVxyXG4gICAgfSB3aGlsZSAoKGVsID0gZWwucGFyZW50RWxlbWVudCkpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gaXNDb250ZW50T3ZlcmZsb3dpbmcoZWwpIHtcclxuICAgIHJldHVybiBlbC5jbGllbnRIZWlnaHQgKyAxMCA8IGVsLnNjcm9sbEhlaWdodDtcclxuICB9XHJcblxyXG4gIC8vIHR5cGljYWxseSBmb3IgPGJvZHk+IGFuZCA8aHRtbD5cclxuICBmdW5jdGlvbiBvdmVyZmxvd05vdEhpZGRlbihlbCkge1xyXG4gICAgdmFyIG92ZXJmbG93ID0gZ2V0Q29tcHV0ZWRTdHlsZShlbCwgXCJcIikuZ2V0UHJvcGVydHlWYWx1ZShcIm92ZXJmbG93LXlcIik7XHJcbiAgICByZXR1cm4gb3ZlcmZsb3cgIT09IFwiaGlkZGVuXCI7XHJcbiAgfVxyXG5cclxuICAvLyBmb3IgYWxsIG90aGVyIGVsZW1lbnRzXHJcbiAgZnVuY3Rpb24gb3ZlcmZsb3dBdXRvT3JTY3JvbGwoZWwpIHtcclxuICAgIHZhciBvdmVyZmxvdyA9IGdldENvbXB1dGVkU3R5bGUoZWwsIFwiXCIpLmdldFByb3BlcnR5VmFsdWUoXCJvdmVyZmxvdy15XCIpO1xyXG4gICAgcmV0dXJuIG92ZXJmbG93ID09PSBcInNjcm9sbFwiIHx8IG92ZXJmbG93ID09PSBcImF1dG9cIjtcclxuICB9XHJcblxyXG4gIC8vIGZvciBhbGwgb3RoZXIgZWxlbWVudHNcclxuICBmdW5jdGlvbiBpc1Njcm9sbEJlaGF2aW9yU21vb3RoKGVsKSB7XHJcbiAgICB2YXIgaWQgPSB1bmlxdWVJRChlbCk7XHJcbiAgICBpZiAoc21vb3RoQmVoYXZpb3JGb3JFbGVtZW50W2lkXSA9PSBudWxsKSB7XHJcbiAgICAgIHZhciBzY3JvbGxCZWhhdmlvciA9IGdldENvbXB1dGVkU3R5bGUoZWwsIFwiXCIpW1wic2Nyb2xsLWJlaGF2aW9yXCJdO1xyXG4gICAgICBzbW9vdGhCZWhhdmlvckZvckVsZW1lbnRbaWRdID0gXCJzbW9vdGhcIiA9PSBzY3JvbGxCZWhhdmlvcjtcclxuICAgIH1cclxuICAgIHJldHVybiBzbW9vdGhCZWhhdmlvckZvckVsZW1lbnRbaWRdO1xyXG4gIH1cclxuXHJcbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICogSEVMUEVSU1xyXG4gICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgZnVuY3Rpb24gYWRkRXZlbnQodHlwZSwgZm4sIGFyZykge1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgZm4sIGFyZyB8fCBmYWxzZSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiByZW1vdmVFdmVudCh0eXBlLCBmbiwgYXJnKSB7XHJcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBmbiwgYXJnIHx8IGZhbHNlKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGlzTm9kZU5hbWUoZWwsIHRhZykge1xyXG4gICAgcmV0dXJuIGVsICYmIChlbC5ub2RlTmFtZSB8fCBcIlwiKS50b0xvd2VyQ2FzZSgpID09PSB0YWcudG9Mb3dlckNhc2UoKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGRpcmVjdGlvbkNoZWNrKHgsIHkpIHtcclxuICAgIHggPSB4ID4gMCA/IDEgOiAtMTtcclxuICAgIHkgPSB5ID4gMCA/IDEgOiAtMTtcclxuICAgIGlmIChkaXJlY3Rpb24ueCAhPT0geCB8fCBkaXJlY3Rpb24ueSAhPT0geSkge1xyXG4gICAgICBkaXJlY3Rpb24ueCA9IHg7XHJcbiAgICAgIGRpcmVjdGlvbi55ID0geTtcclxuICAgICAgcXVlID0gW107XHJcbiAgICAgIGxhc3RTY3JvbGwgPSAwO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaWYgKHdpbmRvdy5sb2NhbFN0b3JhZ2UgJiYgbG9jYWxTdG9yYWdlLlNTX2RlbHRhQnVmZmVyKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyAjNDYgU2FmYXJpIHRocm93cyBpbiBwcml2YXRlIGJyb3dzaW5nIGZvciBsb2NhbFN0b3JhZ2VcclxuICAgICAgZGVsdGFCdWZmZXIgPSBsb2NhbFN0b3JhZ2UuU1NfZGVsdGFCdWZmZXIuc3BsaXQoXCIsXCIpO1xyXG4gICAgfSBjYXRjaCAoZSkge31cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGlzVG91Y2hwYWQoZGVsdGFZKSB7XHJcbiAgICBpZiAoIWRlbHRhWSkgcmV0dXJuO1xyXG4gICAgaWYgKCFkZWx0YUJ1ZmZlci5sZW5ndGgpIHtcclxuICAgICAgZGVsdGFCdWZmZXIgPSBbZGVsdGFZLCBkZWx0YVksIGRlbHRhWV07XHJcbiAgICB9XHJcbiAgICBkZWx0YVkgPSBNYXRoLmFicyhkZWx0YVkpO1xyXG4gICAgZGVsdGFCdWZmZXIucHVzaChkZWx0YVkpO1xyXG4gICAgZGVsdGFCdWZmZXIuc2hpZnQoKTtcclxuICAgIGNsZWFyVGltZW91dChkZWx0YUJ1ZmZlclRpbWVyKTtcclxuICAgIGRlbHRhQnVmZmVyVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIC8vICM0NiBTYWZhcmkgdGhyb3dzIGluIHByaXZhdGUgYnJvd3NpbmcgZm9yIGxvY2FsU3RvcmFnZVxyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5TU19kZWx0YUJ1ZmZlciA9IGRlbHRhQnVmZmVyLmpvaW4oXCIsXCIpO1xyXG4gICAgICB9IGNhdGNoIChlKSB7fVxyXG4gICAgfSwgMTAwMCk7XHJcbiAgICB2YXIgZHBpU2NhbGVkV2hlZWxEZWx0YSA9IGRlbHRhWSA+IDEyMCAmJiBhbGxEZWx0YXNEaXZpc2FibGVCeShkZWx0YVkpOyAvLyB3aW42NFxyXG4gICAgcmV0dXJuIChcclxuICAgICAgIWFsbERlbHRhc0RpdmlzYWJsZUJ5KDEyMCkgJiZcclxuICAgICAgIWFsbERlbHRhc0RpdmlzYWJsZUJ5KDEwMCkgJiZcclxuICAgICAgIWRwaVNjYWxlZFdoZWVsRGVsdGFcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBpc0RpdmlzaWJsZShuLCBkaXZpc29yKSB7XHJcbiAgICByZXR1cm4gTWF0aC5mbG9vcihuIC8gZGl2aXNvcikgPT0gbiAvIGRpdmlzb3I7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBhbGxEZWx0YXNEaXZpc2FibGVCeShkaXZpc29yKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICBpc0RpdmlzaWJsZShkZWx0YUJ1ZmZlclswXSwgZGl2aXNvcikgJiZcclxuICAgICAgaXNEaXZpc2libGUoZGVsdGFCdWZmZXJbMV0sIGRpdmlzb3IpICYmXHJcbiAgICAgIGlzRGl2aXNpYmxlKGRlbHRhQnVmZmVyWzJdLCBkaXZpc29yKVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGlzSW5zaWRlWW91dHViZVZpZGVvKGV2ZW50KSB7XHJcbiAgICB2YXIgZWxlbSA9IGV2ZW50LnRhcmdldDtcclxuICAgIHZhciBpc0NvbnRyb2wgPSBmYWxzZTtcclxuICAgIGlmIChkb2N1bWVudC5VUkwuaW5kZXhPZihcInd3dy55b3V0dWJlLmNvbS93YXRjaFwiKSAhPSAtMSkge1xyXG4gICAgICBkbyB7XHJcbiAgICAgICAgaXNDb250cm9sID1cclxuICAgICAgICAgIGVsZW0uY2xhc3NMaXN0ICYmIGVsZW0uY2xhc3NMaXN0LmNvbnRhaW5zKFwiaHRtbDUtdmlkZW8tY29udHJvbHNcIik7XHJcbiAgICAgICAgaWYgKGlzQ29udHJvbCkgYnJlYWs7XHJcbiAgICAgIH0gd2hpbGUgKChlbGVtID0gZWxlbS5wYXJlbnROb2RlKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaXNDb250cm9sO1xyXG4gIH1cclxuXHJcbiAgdmFyIHJlcXVlc3RGcmFtZSA9IChmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHxcclxuICAgICAgd2luZG93LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSB8fFxyXG4gICAgICB3aW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XHJcbiAgICAgIGZ1bmN0aW9uKGNhbGxiYWNrLCBlbGVtZW50LCBkZWxheSkge1xyXG4gICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGNhbGxiYWNrLCBkZWxheSB8fCAxMDAwIC8gNjApO1xyXG4gICAgICB9XHJcbiAgICApO1xyXG4gIH0pKCk7XHJcblxyXG4gIHZhciBNdXRhdGlvbk9ic2VydmVyID1cclxuICAgIHdpbmRvdy5NdXRhdGlvbk9ic2VydmVyIHx8XHJcbiAgICB3aW5kb3cuV2ViS2l0TXV0YXRpb25PYnNlcnZlciB8fFxyXG4gICAgd2luZG93Lk1vek11dGF0aW9uT2JzZXJ2ZXI7XHJcblxyXG4gIHZhciBnZXRTY3JvbGxSb290ID0gKGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIFNDUk9MTF9ST09UID0gZG9jdW1lbnQuc2Nyb2xsaW5nRWxlbWVudDtcclxuICAgIHJldHVybiBmdW5jdGlvbigpIHtcclxuICAgICAgaWYgKCFTQ1JPTExfUk9PVCkge1xyXG4gICAgICAgIHZhciBkdW1teSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgZHVtbXkuc3R5bGUuY3NzVGV4dCA9IFwiaGVpZ2h0OjEwMDAwcHg7d2lkdGg6MXB4O1wiO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZHVtbXkpO1xyXG4gICAgICAgIHZhciBib2R5U2Nyb2xsVG9wID0gZG9jdW1lbnQuYm9keS5zY3JvbGxUb3A7XHJcbiAgICAgICAgdmFyIGRvY0VsU2Nyb2xsVG9wID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcDtcclxuICAgICAgICB3aW5kb3cuc2Nyb2xsQnkoMCwgMyk7XHJcbiAgICAgICAgaWYgKGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wICE9IGJvZHlTY3JvbGxUb3ApXHJcbiAgICAgICAgICBTQ1JPTExfUk9PVCA9IGRvY3VtZW50LmJvZHk7XHJcbiAgICAgICAgZWxzZSBTQ1JPTExfUk9PVCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcclxuICAgICAgICB3aW5kb3cuc2Nyb2xsQnkoMCwgLTMpO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZHVtbXkpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBTQ1JPTExfUk9PVDtcclxuICAgIH07XHJcbiAgfSkoKTtcclxuXHJcbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICogUFVMU0UgKGJ5IE1pY2hhZWwgSGVyZilcclxuICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gIC8qKlxyXG4gICAqIFZpc2NvdXMgZmx1aWQgd2l0aCBhIHB1bHNlIGZvciBwYXJ0IGFuZCBkZWNheSBmb3IgdGhlIHJlc3QuXHJcbiAgICogLSBBcHBsaWVzIGEgZml4ZWQgZm9yY2Ugb3ZlciBhbiBpbnRlcnZhbCAoYSBkYW1wZWQgYWNjZWxlcmF0aW9uKSwgYW5kXHJcbiAgICogLSBMZXRzIHRoZSBleHBvbmVudGlhbCBibGVlZCBhd2F5IHRoZSB2ZWxvY2l0eSBvdmVyIGEgbG9uZ2VyIGludGVydmFsXHJcbiAgICogLSBNaWNoYWVsIEhlcmYsIGh0dHA6Ly9zdGVyZW9wc2lzLmNvbS9zdG9wcGluZy9cclxuICAgKi9cclxuICBmdW5jdGlvbiBwdWxzZV8oeCkge1xyXG4gICAgdmFyIHZhbCwgc3RhcnQsIGV4cHg7XHJcbiAgICAvLyB0ZXN0XHJcbiAgICB4ID0geCAqIG9wdGlvbnMucHVsc2VTY2FsZTtcclxuICAgIGlmICh4IDwgMSkge1xyXG4gICAgICAvLyBhY2NlbGVhcnRpb25cclxuICAgICAgdmFsID0geCAtICgxIC0gTWF0aC5leHAoLXgpKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIHRhaWxcclxuICAgICAgLy8gdGhlIHByZXZpb3VzIGFuaW1hdGlvbiBlbmRlZCBoZXJlOlxyXG4gICAgICBzdGFydCA9IE1hdGguZXhwKC0xKTtcclxuICAgICAgLy8gc2ltcGxlIHZpc2NvdXMgZHJhZ1xyXG4gICAgICB4IC09IDE7XHJcbiAgICAgIGV4cHggPSAxIC0gTWF0aC5leHAoLXgpO1xyXG4gICAgICB2YWwgPSBzdGFydCArIGV4cHggKiAoMSAtIHN0YXJ0KTtcclxuICAgIH1cclxuICAgIHJldHVybiB2YWwgKiBvcHRpb25zLnB1bHNlTm9ybWFsaXplO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcHVsc2UoeCkge1xyXG4gICAgaWYgKHggPj0gMSkgcmV0dXJuIDE7XHJcbiAgICBpZiAoeCA8PSAwKSByZXR1cm4gMDtcclxuXHJcbiAgICBpZiAob3B0aW9ucy5wdWxzZU5vcm1hbGl6ZSA9PSAxKSB7XHJcbiAgICAgIG9wdGlvbnMucHVsc2VOb3JtYWxpemUgLz0gcHVsc2VfKDEpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHB1bHNlXyh4KTtcclxuICB9XHJcblxyXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAqIEZJUlNUIFJVTlxyXG4gICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgdmFyIHVzZXJBZ2VudCA9IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50O1xyXG4gIHZhciBpc0VkZ2UgPSAvRWRnZS8udGVzdCh1c2VyQWdlbnQpOyAvLyB0aGFuayB5b3UgTVNcclxuICB2YXIgaXNDaHJvbWUgPSAvY2hyb21lL2kudGVzdCh1c2VyQWdlbnQpICYmICFpc0VkZ2U7XHJcbiAgdmFyIGlzU2FmYXJpID0gL3NhZmFyaS9pLnRlc3QodXNlckFnZW50KSAmJiAhaXNFZGdlO1xyXG4gIHZhciBpc01vYmlsZSA9IC9tb2JpbGUvaS50ZXN0KHVzZXJBZ2VudCk7XHJcbiAgdmFyIGlzSUVXaW43ID0gL1dpbmRvd3MgTlQgNi4xL2kudGVzdCh1c2VyQWdlbnQpICYmIC9ydjoxMS9pLnRlc3QodXNlckFnZW50KTtcclxuICB2YXIgaXNPbGRTYWZhcmkgPVxyXG4gICAgaXNTYWZhcmkgJiZcclxuICAgICgvVmVyc2lvblxcLzgvaS50ZXN0KHVzZXJBZ2VudCkgfHwgL1ZlcnNpb25cXC85L2kudGVzdCh1c2VyQWdlbnQpKTtcclxuICB2YXIgaXNFbmFibGVkRm9yQnJvd3NlciA9IChpc0Nocm9tZSB8fCBpc1NhZmFyaSB8fCBpc0lFV2luNykgJiYgIWlzTW9iaWxlO1xyXG5cclxuICB2YXIgc3VwcG9ydHNQYXNzaXZlID0gZmFsc2U7XHJcbiAgdHJ5IHtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICBcInRlc3RcIixcclxuICAgICAgbnVsbCxcclxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCBcInBhc3NpdmVcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBzdXBwb3J0c1Bhc3NpdmUgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgICk7XHJcbiAgfSBjYXRjaCAoZSkge31cclxuXHJcbiAgdmFyIHdoZWVsT3B0ID0gc3VwcG9ydHNQYXNzaXZlID8geyBwYXNzaXZlOiBmYWxzZSB9IDogZmFsc2U7XHJcbiAgdmFyIHdoZWVsRXZlbnQgPVxyXG4gICAgXCJvbndoZWVsXCIgaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSA/IFwid2hlZWxcIiA6IFwibW91c2V3aGVlbFwiO1xyXG5cclxuICBpZiAod2hlZWxFdmVudCAmJiBpc0VuYWJsZWRGb3JCcm93c2VyKSB7XHJcbiAgICBhZGRFdmVudCh3aGVlbEV2ZW50LCB3aGVlbCwgd2hlZWxPcHQpO1xyXG4gICAgYWRkRXZlbnQoXCJtb3VzZWRvd25cIiwgbW91c2Vkb3duKTtcclxuICAgIGFkZEV2ZW50KFwibG9hZFwiLCBpbml0KTtcclxuICB9XHJcblxyXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAqIFBVQkxJQyBJTlRFUkZBQ0VcclxuICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gIGZ1bmN0aW9uIFNtb290aFNjcm9sbChvcHRpb25zVG9TZXQpIHtcclxuICAgIGZvciAodmFyIGtleSBpbiBvcHRpb25zVG9TZXQpXHJcbiAgICAgIGlmIChkZWZhdWx0T3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShrZXkpKSBvcHRpb25zW2tleV0gPSBvcHRpb25zVG9TZXRba2V5XTtcclxuICB9XHJcbiAgU21vb3RoU2Nyb2xsLmRlc3Ryb3kgPSBjbGVhbnVwO1xyXG5cclxuICBpZiAod2luZG93LlNtb290aFNjcm9sbE9wdGlvbnMpXHJcbiAgICAvLyBhc3luYyBBUElcclxuICAgIFNtb290aFNjcm9sbCh3aW5kb3cuU21vb3RoU2Nyb2xsT3B0aW9ucyk7XHJcblxyXG4gIGlmICh0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZClcclxuICAgIGRlZmluZShmdW5jdGlvbigpIHtcclxuICAgICAgcmV0dXJuIFNtb290aFNjcm9sbDtcclxuICAgIH0pO1xyXG4gIGVsc2UgaWYgKFwib2JqZWN0XCIgPT0gdHlwZW9mIGV4cG9ydHMpIG1vZHVsZS5leHBvcnRzID0gU21vb3RoU2Nyb2xsO1xyXG4gIGVsc2Ugd2luZG93LlNtb290aFNjcm9sbCA9IFNtb290aFNjcm9sbDtcclxufSkoKTtcclxuIiwiJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xyXG4gICAgY29uc3QgbmF2X21lbnUgPSAkKCcubmF2aWdhdGlvbl9tZW51Jyk7XHJcbiAgICBjb25zdCBuYXZfYmFyID0gJCgnLm5hdmlnYXRpb25fYmFyJyk7XHJcbiAgICAvL2hhbWJ1cmdlclxyXG4gICAgbmF2X2Jhci5jbGljayhmdW5jdGlvbigpe1xyXG4gICAgICAgICQodGhpcykudG9nZ2xlQ2xhc3MoJ25hdmlnYXRpb25fYmFyLS1vcGVuJyk7XHJcbiAgICAgICAgbmF2X21lbnUudG9nZ2xlKCk7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgb25SZXNpemUoKTtcclxuICAgICQod2luZG93KS5vbigncmVzaXplJyxvblJlc2l6ZSlcclxuICAgICQoZG9jdW1lbnQpLm9uKFwic2Nyb2xsXCIsIG9uU2Nyb2xsKTtcclxuICAgIFxyXG4gICAgLy9zbW9vdGhzY3JvbGxcclxuICAgICQoJ2FbaHJlZl49XCIjXCJdJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgJChkb2N1bWVudCkub2ZmKFwic2Nyb2xsXCIpO1xyXG4gICAgICAgIG9uUmVzaXplKCk7XHJcbiAgICAgICAgbmF2X2Jhci5yZW1vdmVDbGFzcygnbmF2aWdhdGlvbl9iYXItLW9wZW4nKTtcclxuICAgICAgICAkKCdhJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICQodGhpcykucGFyZW50KCkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICBcclxuICAgICAgICBsZXQgdGFyZ2V0ID0gdGhpcy5oYXNoO1xyXG4gICAgICAgIGxldCAkdGFyZ2V0ID0gJCh0YXJnZXQpLm9mZnNldCgpLnRvcCAtIDcwO1xyXG4gICAgXHJcbiAgICAgICAgJCgnaHRtbCwgYm9keScpLnN0b3AoKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgJ3Njcm9sbFRvcCc6ICR0YXJnZXRcclxuICAgICAgICB9LCA1MDAsJ3N3aW5nJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgJChkb2N1bWVudCkub24oXCJzY3JvbGxcIiwgb25TY3JvbGwpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG59KTtcclxuXHJcbmZ1bmN0aW9uIG9uUmVzaXplKGV2ZW50KXtcclxuICAgIGNvbnN0IHdpZHRoID0gJCh3aW5kb3cpLndpZHRoKCk7XHJcbiAgICBjb25zdCBuYXZfYmFyID0gJCgnLm5hdmlnYXRpb25fYmFyJyk7XHJcbiAgICBjb25zdCBuYXZfbWVudSA9ICQoJy5uYXZpZ2F0aW9uX21lbnUnKTtcclxuICAgIFxyXG4gICAgaWYod2lkdGg8IDgwMCl7XHJcbiAgICAgICAgbmF2X21lbnUuaGlkZSgpO1xyXG4gICAgICAgIG5hdl9iYXIuc2hvdygpO1xyXG4gICAgfWVsc2V7XHJcbiAgICAgICAgbmF2X21lbnUuc2hvdygpO1xyXG4gICAgICAgIG5hdl9iYXIuaGlkZSgpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBvblNjcm9sbChldmVudCl7XHJcbiAgICBsZXQgc2Nyb2xsUG9zID0gJChkb2N1bWVudCkuc2Nyb2xsVG9wKCk7XHJcbiAgICAkKCcubmF2aWdhdGlvbl9pdGVtcyBhJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbGV0IGN1cnJMaW5rID0gJCh0aGlzKTtcclxuICAgICAgICBsZXQgcmVmRWxlbWVudCA9ICQoY3VyckxpbmsuYXR0cihcImhyZWZcIikpO1xyXG4gICAgICAgIGlmIChyZWZFbGVtZW50LnBvc2l0aW9uKCkudG9wLTcwIDw9IHNjcm9sbFBvcyAmJiAocmVmRWxlbWVudC5wb3NpdGlvbigpLnRvcCkgKyByZWZFbGVtZW50LmhlaWdodCgpID49IHNjcm9sbFBvcykge1xyXG4gICAgICAgICAgICAkKCcubmF2aWdhdGlvbl9pdGVtcyB1bCBsaSBhJykucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgICAgIGN1cnJMaW5rLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICBjdXJyTGluay5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufSIsIlwidXNlIHN0cmljdFwiOyIsIlwidXNlIHN0cmljdFwiOyJdfQ==
